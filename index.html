<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>6 Months ‚Äî Surprise ‚ú®</title>
  <style>
    :root{--bg1:#FFDEE9;--bg2:#B5FFFC;--accent:#ff6b9a}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;background:linear-gradient(135deg,var(--bg1),var(--bg2));min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .card{width:100%;max-width:900px;background:rgba(255,255,255,0.9);backdrop-filter:blur(6px);border-radius:18px;box-shadow:0 10px 30px rgba(10,10,10,0.12);padding:28px;position:relative;overflow:hidden}
    header{display:flex;align-items:center;gap:18px}
    h1{margin:0;font-size:28px;color:#222}
    p.lead{margin:6px 0 0;color:#444}
    .photo-area{display:flex;gap:18px;margin-top:20px;align-items:center}
    .photo{width:250px;height:250px;border-radius:18px;overflow:hidden;flex:0 0 250px;background:linear-gradient(180deg,#fff,#f6f6f6);display:flex;align-items:center;justify-content:center;border:4px solid rgba(255,255,255,0.6)}
    .photo img{width:100%;height:100%;object-fit:cover;display:block}
    .controls{flex:1}
    .btn{display:inline-block;padding:10px 16px;border-radius:10px;border:none;background:var(--accent);color:white;font-weight:600;cursor:pointer}
    .small{font-size:14px;color:#666;margin-top:8px}
    .reveal{margin-top:18px}
    .message{margin-top:20px;padding:18px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.95),rgba(255,255,255,0.85));min-height:120px;display:flex;align-items:center;justify-content:center;font-size:20px;color:#111;text-align:center}
    .hidden{display:none}
    .heart{position:absolute;right:-60px;top:-60px;width:220px;height:220px;opacity:0.08;transform:rotate(25deg);filter:drop-shadow(0 6px 10px rgba(0,0,0,0.06))}
    footer{margin-top:16px;font-size:13px;color:#666;display:flex;justify-content:space-between;align-items:center}
    input[type=file]{display:none}
    .file-label{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:10px;border:1px dashed rgba(0,0,0,0.08);cursor:pointer}
    /* typing cursor */
    .typing{border-right:2px solid rgba(0,0,0,0.12);padding-right:6px}
    /* responsive */
    @media (max-width:640px){.photo{width:160px;height:160px;flex:0 0 160px}.card{padding:18px}.message{font-size:18px}}
  </style>
</head>
<body>
  <div class="card" id="card">
    <svg class="heart" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 21s-7-4.4-9-7.2C-0.1 9 .7 4.2 5.4 3.3 8 2.8 10.1 4.4 12 6.2 13.9 4.4 16 .8 18.6 3.3c4.7.9 5.5 5.8 2.4 10.6C19 16.6 12 21 12 21z" fill="url(#g)"/></svg>

    <header>
      <div>
        <h1>Happy 6 Months Anniversary ‚ù§Ô∏è</h1>
        <p class="lead">A little surprise I made just for us ‚Äî tap Reveal when you're ready.
            I LOVE YOU BABYYYYYYYYYY
        </p>
      </div>
    </header>

    <div class="photo-area">
      <div class="photo" id="photoBox">
        <!-- Default placeholder image encoded as SVG to keep single-file -->
        <img id="couplePhoto" alt="Your photo will appear here" src="mal1.jpg">
      </div>

      <div class="controls">
        <label class="file-label" for="photoInput">üì∑ Choose photo</label>
        <input id="photoInput" type="file" accept="image/*">
        <div class="small">Tip: choose a photo of both of you. The image will be shown on the card instantly.</div>

        <div class="reveal">
          <button id="revealBtn" class="btn">Reveal surprise ‚ú®</button>
          <div style="display:inline-block;margin-left:12px">
            <label style="font-size:14px;color:#666">Play music?</label>
            <input type="checkbox" id="musicToggle" style="margin-left:8px">
          </div>
        </div>

        <div class="small" style="margin-top:10px">You can also drag & drop an image onto the photo area.</div>
      </div>
    </div>

    <div class="message hidden" id="messageBox"> 
      <div id="messageText"></div>
    </div>

    <footer>
      <div>Made with ‚ù§ ‚Äî 6 months anniversary</div>
      <div style="font-size:12px;color:#999">Tip: to keep this page offline, open the file in your browser (double-click the .html file).</div>
    </footer>

    <!-- Confetti canvas -->
    <canvas id="confettiCanvas" style="position:absolute;inset:0;pointer-events:none"></canvas>
  </div>

  <audio id="bgMusic" loop src=""></audio>

  <script>
    // Elements
    const photoInput = document.getElementById('photoInput');
    const couplePhoto = document.getElementById('couplePhoto');
    const photoBox = document.getElementById('photoBox');
    const revealBtn = document.getElementById('revealBtn');
    const messageBox = document.getElementById('messageBox');
    const messageText = document.getElementById('messageText');
    const confettiCanvas = document.getElementById('confettiCanvas');
    const musicToggle = document.getElementById('musicToggle');
    const bgMusic = document.getElementById('bgMusic');

    // --- Photo upload & drag/drop ---
    photoInput.addEventListener('change', e => {
      const f = e.target.files && e.target.files[0];
      if(!f) return;
      couplePhoto.src = URL.createObjectURL(f);
    });

    // label click triggers file input
    document.querySelector('.file-label').addEventListener('click', ()=> photoInput.click());

    // Drag & drop
    ['dragenter','dragover'].forEach(evt => {
      photoBox.addEventListener(evt, e => { e.preventDefault(); photoBox.style.opacity = 0.9; });
    });
    ['dragleave','drop'].forEach(evt => {
      photoBox.addEventListener(evt, e => { e.preventDefault(); photoBox.style.opacity = 1; });
    });
    photoBox.addEventListener('drop', e => {
      const f = e.dataTransfer.files && e.dataTransfer.files[0];
      if(!f) return;
      couplePhoto.src = URL.createObjectURL(f);
    });

    // --- Typing message and confetti ---
    const surpriseMessage = `To my love ‚Äî

  Six months of laughter, late-night talks, and little adventures. You make the ordinary feel like magic. Thank you for being you. Here's to us, today and always. ‚ù§Ô∏è`;

    function typeMessage(text, el, cb){
      el.textContent = '';
      messageBox.classList.remove('hidden');
      let i=0;
      function step(){
        if(i <= text.length){
          el.textContent = text.slice(0,i);
          i++;
          setTimeout(step, 28 + Math.random()*30);
        } else if(cb) cb();
      }
      step();
    }

    revealBtn.addEventListener('click', ()=>{
      // music
      if(musicToggle.checked && !bgMusic.src){
        // if user wants music, they'll need to set a file named 'music.mp3' in same folder or use browser dev tools to set src.
        // We'll attempt to ask user to pick a file via a temporary input.
        const mInput = document.createElement('input');
        mInput.type = 'file'; mInput.accept = 'audio/*';
        mInput.addEventListener('change', e=>{
          const f = e.target.files[0]; if(!f) return; bgMusic.src = URL.createObjectURL(f); bgMusic.play().catch(()=>{});
        });
        mInput.click();
      } else if(musicToggle.checked && bgMusic.src){
        bgMusic.play().catch(()=>{});
      }

      revealBtn.disabled = true; revealBtn.textContent = 'Revealing...';
      startConfetti();
      typeMessage(surpriseMessage, messageText, ()=>{
        revealBtn.textContent = 'Revealed ‚úì';
        revealBtn.classList.add('btn');
      });
    });

    // --- Simple confetti ---
    const ctx = confettiCanvas.getContext('2d');
    let W, H, confetti = [], running = false;
    function resize(){ W = confettiCanvas.width = confettiCanvas.offsetWidth; H = confettiCanvas.height = confettiCanvas.offsetHeight; }
    window.addEventListener('resize', resize); resize();

    function rand(min,max){ return Math.random()*(max-min)+min }
    function startConfetti(){ if(running) return; running = true; confetti = [];
      for(let i=0;i<140;i++){
        confetti.push({x:rand(0,W), y:rand(-H,0), r:rand(6,12), d:rand(10,30), tilt:rand(-10,10), color:`hsl(${Math.floor(rand(0,360))} 80% 60%)`, velY:rand(1,4), velX:rand(-1,1)});
      }
      requestAnimationFrame(loop);
      setTimeout(()=>{ running = false; }, 9000);
    }
    function loop(){ ctx.clearRect(0,0,W,H);
      confetti.forEach((c,i)=>{
        c.y += c.velY; c.x += c.velX; c.tilt += 0.1;
        ctx.save(); ctx.translate(c.x,c.y); ctx.rotate(c.tilt*0.02);
        ctx.fillStyle = c.color; ctx.fillRect(-c.r/2, -c.r/2, c.r, c.r*0.6);
        ctx.restore();
        if(c.y > H+20) confetti[i].y = -10;
      });
      if(running) requestAnimationFrame(loop);
    }

    // --- Optional: let user save the card as an image ---
    function downloadCard(){
      // quick approach: temporarily hide controls then use HTML2Canvas would be ideal but not available offline.
      alert('To save this page as an image: take a screenshot or print to PDF (Ctrl/Cmd+P) and choose "Save as PDF".');
    }

    // Accessibility: allow Enter on reveal
    revealBtn.addEventListener('keyup', e => { if(e.key==='Enter') revealBtn.click(); });

    // Allow user to pre-load an image file named 'couple.jpg' placed next to the HTML when opened locally
    // This will try to load couple.jpg via relative path if available
    (function tryDefault(){
      const img = new Image(); img.onload = ()=>{ couplePhoto.src = 'couple.jpg' }; img.onerror = ()=>{}; img.src = 'couple.jpg';
    })();

  </script>

  <!--
    HOW TO USE:
    - Save this file as anniversary.html and open it in your browser.
    - Click "Choose photo" or drag & drop a photo of you and your girlfriend onto the photo box.
    - Optionally toggle "Play music?" and choose a music file when prompted.
    - Click "Reveal surprise" to show the message and confetti.

    Want changes? Tell me the exact text you want, a color scheme, or a song you'd like preloaded and I'll update the file.
  -->
</body>
</html>
